<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Robust Regression Outlier Statistics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for outlierStats {robustbase}"><tr><td>outlierStats {robustbase}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Robust Regression Outlier Statistics</h2>

<h3>Description</h3>

<p>Simple statistics about observations with robustness
weight of almost zero for models that include factor
terms. The number of rejected observations and the mean
robustness weights are computed for each level of each
factor included in the model.
</p>


<h3>Usage</h3>

<pre>
outlierStats(object, x = object$x, control = object$control,
             epsw = control$eps.outlier, epsx = control$eps.x,
             warn.limit.reject = control$warn.limit.reject,
             warn.limit.meanrw = control$warn.limit.meanrw)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>object of class <code>"lmrob"</code>, typically the result of a call
to <code><a href="lmrob.html">lmrob</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p>design matrix</p>
</td></tr>
<tr valign="top"><td><code>control</code></td>
<td>
<p>list as returned by <code><a href="lmrob.control.html">lmrob.control</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>epsw</code></td>
<td>
<p>limit on the robustness weight below which an observation is considered
to be an outlier.  Either a <code>numeric(1)</code> or a
<code><a href="../../base/html/function.html">function</a></code> that takes the number of observations as an argument.</p>
</td></tr>
<tr valign="top"><td><code>epsx</code></td>
<td>
<p>limit on the absolute value of the elements of the design matrix
below which an element is considered zero.  Either a numeric(1) or a
function that takes the maximum absolute value in the design matrix
as an argument.</p>
</td></tr>
<tr valign="top"><td><code>warn.limit.reject</code></td>
<td>
<p>limit of ratio
<i># rejected / # obs in level</i>
above (<i>&gt;=</i>) which a warning is produced.  Set to
<code>NULL</code> to disable warning.</p>
</td></tr>
<tr valign="top"><td><code>warn.limit.meanrw</code></td>
<td>
<p>limit of the mean robustness per factor level
below which (<i>&lt;=</i>) a warning is produced.  Set to
<code>NULL</code> to disable warning.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For models that include factors, the fast S-algorithm used by
<code><a href="lmrob.html">lmrob</a></code> can produce &ldquo;bad&rdquo; fits for some of the
factor levels, especially if there are many levels with only a
few observations. Such a &ldquo;bad&rdquo; fit is characterized as a
fit where most of the observations in a level of a factor are
rejected, i.e., are assigned robustness weights of zero or nearly
zero. We call such a fit a &ldquo;local exact fit&rdquo;.
</p>
<p>If a local exact fit is detected, then we recommend to increase some
of the control parameters of the &ldquo;fast S&rdquo;-algorithm. As a first
aid solution in such cases, one can use <code>setting="KS2014"</code>, see also
<code><a href="lmrob.control.html">lmrob.control</a></code>.
</p>
<p>This function is called internally by <code><a href="lmrob.html">lmrob</a></code> to issue a
warning if a local exact fit is detected. The output is available as
<code>ostats</code> in objects of class <code>"lmrob"</code> (only if the statistic
is computed).
</p>


<h3>Value</h3>

<p>A data frames for each column with any zero elementes as well as an
overall statistic. The data frame consist of the names of the
coefficients in question, the number of non-zero observation in that
level (<code>N.nonzero</code>), the number of rejected observations
(<code>N.rejected</code>), the ratio of rejected observations to the
number of observations in that level (<code>Ratio</code>) and the mean
robustness weight of all the observations in the corresponding level
(<code>Mean.RobWeight</code>).
</p>


<h3>Author(s)</h3>

<p>Manuel Koller</p>


<h3>References</h3>

<p>Koller, M. and Stahel, W.A. (2017)
Nonsingular subsampling for regression S~estimators with categorical predictors,
<em>Computational Statistics</em> <b>32</b>(2): 631&ndash;646.
doi: <a href="https://doi.org/10.1007/s00180-016-0679-x">10.1007/s00180-016-0679-x</a>
</p>


<h3>See Also</h3>

<p><code><a href="lmrob.control.html">lmrob.control</a></code> for the default values of the control
parameters;  <code><a href="summarizeRobWeights.html">summarizeRobWeights</a></code>.
</p>


<h3>Examples</h3>

<pre>
## artificial data example
data &lt;- expand.grid(grp1 = letters[1:5], grp2 = letters[1:5], rep=1:3)
set.seed(101)
data$y &lt;- c(rt(nrow(data), 1))
## compute outlier statistics for all the estimators
control &lt;- lmrob.control(method = "SMDM",
                         compute.outlier.stats = c("S", "MM", "SMD", "SMDM"))
## warning is only issued for some seeds
set.seed(2)
fit1 &lt;- lmrob(y ~ grp1*grp2, data, control = control)
## do as suggested:
fit2 &lt;- lmrob(y ~ grp1*grp2, data, setting = "KS2014")

## the plot function should work for such models as well
plot(fit1)

## Not run: 
  ## access statistics:
  fit1$ostats ## SMDM
  fit1$init$ostats ## SMD
  fit1$init$init$ostats ## SM
  fit1$init$init$init.S$ostats ## S

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>robustbase</em> version 0.95-0 <a href="00Index.html">Index</a>]</div>
</body></html>
