<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Direct standardization within domains</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for svystandardize {survey}"><tr><td>svystandardize {survey}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Direct standardization within domains
</h2>

<h3>Description</h3>

<p>In health surveys it is often of interest to standardize domains to have the same distribution of, eg, age as in a target population.  The operation is similar to post-stratification, except that the totals for the domains are fixed at the current estimates, not at known population values.  This function matches the estimates produced by the (US) National Center for Health Statistics.
</p>


<h3>Usage</h3>

<pre>
svystandardize(design, by, over, population, excluding.missing = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>design</code></td>
<td>

<p>survey design object  
</p>
</td></tr>
<tr valign="top"><td><code>by</code></td>
<td>

<p>A one-sided formula specifying the variables whose distribution will be standardised
</p>
</td></tr>
<tr valign="top"><td><code>over</code></td>
<td>

<p>A one-sided formula specifying the domains within which the
standardisation will occur, or <code>~1</code> to use the whole population.
</p>
</td></tr>
<tr valign="top"><td><code>population</code></td>
<td>

<p>Desired population totals or proportions for the levels of combinations of variables in <code>by</code>
</p>
</td></tr>
<tr valign="top"><td><code>excluding.missing</code></td>
<td>

<p>Optionally, a one-sided formula specifying variables whose missing values should be dropped before calculating the domain totals. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new survey design object of the same type as the input.
</p>


<h3>Note</h3>

<p>The standard error estimates do not exactly match the NCHS estimates
</p>


<h3>References</h3>

<p>National Center for Health Statistics <code style="white-space: pre;">https://www.cdc.gov/nchs/tutorials/NHANES/NHANESAnalyses/agestandardization/age_standardization_intro.htm</code></p>


<h3>See Also</h3>

<p><code><a href="postStratify.html">postStratify</a></code>, <code><a href="svyby.html">svyby</a></code>
</p>


<h3>Examples</h3>

<pre>
## matches http://www.cdc.gov/nchs/data/databriefs/db92_fig1.png
data(nhanes)
popage &lt;- c( 55901 , 77670 , 72816 , 45364 )
design&lt;-svydesign(id=~SDMVPSU, strata=~SDMVSTRA, weights=~WTMEC2YR, data=nhanes, nest=TRUE)
stdes&lt;-svystandardize(design, by=~agecat, over=~race+RIAGENDR, 
   population=popage, excluding.missing=~HI_CHOL)
svyby(~HI_CHOL, ~race+RIAGENDR, svymean, design=subset(stdes,
agecat!="(0,19]"))


data(nhanes)
nhanes_design &lt;- svydesign(ids = ~ SDMVPSU, strata = ~ SDMVSTRA, 
                        weights = ~ WTMEC2YR, nest = TRUE, data = nhanes)

## These are the same
nhanes_adj &lt;- svystandardize(update(nhanes_design, all_adults = "1"),
                 by = ~ agecat, over = ~ all_adults,
                 population = c(55901, 77670, 72816, 45364), 
                 excluding.missing = ~ HI_CHOL)
svymean(~I(HI_CHOL == 1), nhanes_adj, na.rm = TRUE)		 

nhanes_adj &lt;- svystandardize(nhanes_design,
                 by = ~ agecat, over = ~ 1,
                 population = c(55901, 77670, 72816, 45364), 
                 excluding.missing = ~ HI_CHOL)
svymean(~I(HI_CHOL == 1), nhanes_adj, na.rm = TRUE)		 

</pre>

<hr /><div style="text-align: center;">[Package <em>survey</em> version 4.1-1 <a href="00Index.html">Index</a>]</div>
</body></html>
