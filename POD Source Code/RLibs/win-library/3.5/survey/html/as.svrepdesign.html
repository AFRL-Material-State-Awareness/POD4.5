<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Convert a survey design to use replicate weights</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for as.svrepdesign {survey}"><tr><td>as.svrepdesign {survey}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Convert a survey design to use replicate weights</h2>

<h3>Description</h3>

<p>Creates a replicate-weights survey design object from a traditional
strata/cluster survey design object. <code>JK1</code> and <code>JKn</code> are
jackknife methods, <code>BRR</code> is Balanced Repeated Replicates and
<code>Fay</code> is Fay's modification of this, <code>bootstrap</code> is Canty
and Davison's bootstrap, <code>subbootstrap</code> is Rao and Wu's
<i>(n-1)</i> bootstrap, and <code>mrbbootstrap</code> is Preston's multistage
rescaled bootstrap.  With a <code>svyimputationList</code> object, the same
replicate weights will be used for each imputation if the sampling
weights are all the same and <code>separate.replicates=FALSE</code>.
</p>


<h3>Usage</h3>

<pre>
as.svrepdesign(design,...)
## Default S3 method:
as.svrepdesign(design, type=c("auto", "JK1", "JKn", "BRR", "bootstrap",
   "subbootstrap","mrbbootstrap","Fay"),
   fay.rho = 0, fpc=NULL,fpctype=NULL,..., compress=TRUE, 
   mse=getOption("survey.replicates.mse"))
## S3 method for class 'svyimputationList'
as.svrepdesign(design, type=c("auto", "JK1", "JKn", "BRR", "bootstrap",
   "subbootstrap","mrbbootstrap","Fay"),
   fay.rho = 0, fpc=NULL,fpctype=NULL, separate.replicates=FALSE, ..., compress=TRUE, 
   mse=getOption("survey.replicates.mse"))
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>design</code></td>
<td>
<p>Object of class <code>survey.design</code> or   <code>svyimputationList</code></p>
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
<p>Type of replicate weights. <code>"auto"</code> uses JKn for
stratified, JK1 for unstratified designs</p>
</td></tr>
<tr valign="top"><td><code>fay.rho</code></td>
<td>
<p>Tuning parameter for Fay's variance method </p>
</td></tr>
<tr valign="top"><td><code>fpc,fpctype,...</code></td>
<td>
<p>Passed to <code>jk1weights</code>, <code>jknweights</code>,
<code>brrweights</code>, <code>bootweights</code>, <code>subbootweights</code>, or
<code>mrbweights</code>.</p>
</td></tr>
<tr valign="top"><td><code>separate.replicates</code></td>
<td>
<p>Compute replicate weights separately for
each design (useful for the bootstrap types, which are not deterministic</p>
</td></tr>
<tr valign="top"><td><code>compress</code></td>
<td>
<p>Use a compressed representation of the replicate
weights matrix.</p>
</td></tr>
<tr valign="top"><td><code>mse</code></td>
<td>
<p>if <code>TRUE</code>, compute variances from sums of squares around
the point estimate, rather than the mean of the replicates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>svyrep.design</code>.
</p>


<h3>References</h3>

<p>Canty AJ, Davison AC. (1999) Resampling-based variance
estimation for labour force surveys. The Statistician 48:379-391
</p>
<p>Judkins, D. (1990), &quot;Fay's Method for Variance Estimation,&quot; Journal of Official Statistics, 6, 223-239.
</p>
<p>Preston J. (2009) Rescaled bootstrap for stratified multistage sampling. Survey Methodology 35(2) 227-234
</p>
<p>Rao JNK, Wu CFJ. Bootstrap inference for sample surveys. Proc Section
on Survey Research Methodology. 1993 (866&ndash;871)
</p>


<h3>See Also</h3>

<p><code><a href="brrweights.html">brrweights</a></code>, <code><a href="svydesign.html">svydesign</a></code>,
<code><a href="svrepdesign.html">svrepdesign</a></code>, <code><a href="bootweights.html">bootweights</a></code>, <code><a href="bootweights.html">subbootweights</a></code>, <code><a href="bootweights.html">mrbweights</a></code>
</p>


<h3>Examples</h3>

<pre>
data(scd)
scddes&lt;-svydesign(data=scd, prob=~1, id=~ambulance, strata=~ESA,
nest=TRUE, fpc=rep(5,6))
scdnofpc&lt;-svydesign(data=scd, prob=~1, id=~ambulance, strata=~ESA,
nest=TRUE)

# convert to BRR replicate weights
scd2brr &lt;- as.svrepdesign(scdnofpc, type="BRR")
scd2fay &lt;- as.svrepdesign(scdnofpc, type="Fay",fay.rho=0.3)
# convert to JKn weights 
scd2jkn &lt;- as.svrepdesign(scdnofpc, type="JKn")

# convert to JKn weights with finite population correction
scd2jknf &lt;- as.svrepdesign(scddes, type="JKn")

## with user-supplied hadamard matrix
scd2brr1 &lt;- as.svrepdesign(scdnofpc, type="BRR", hadamard.matrix=paley(11))

svyratio(~alive, ~arrests, design=scd2brr)
svyratio(~alive, ~arrests, design=scd2brr1)
svyratio(~alive, ~arrests, design=scd2fay)
svyratio(~alive, ~arrests, design=scd2jkn)
svyratio(~alive, ~arrests, design=scd2jknf)

data(api)
## one-stage cluster sample
dclus1&lt;-svydesign(id=~dnum, weights=~pw, data=apiclus1, fpc=~fpc)
## convert to JK1 jackknife
rclus1&lt;-as.svrepdesign(dclus1)
## convert to bootstrap
bclus1&lt;-as.svrepdesign(dclus1,type="bootstrap", replicates=100)

svymean(~api00, dclus1)
svytotal(~enroll, dclus1)

svymean(~api00, rclus1)
svytotal(~enroll, rclus1)

svymean(~api00, bclus1)
svytotal(~enroll, bclus1)

dclus2&lt;-svydesign(id = ~dnum + snum, fpc = ~fpc1 + fpc2, data = apiclus2)
mrbclus2&lt;-as.svrepdesign(dclus2, type="mrb",replicates=100)
svytotal(~api00+stype, dclus2)
svytotal(~api00+stype, mrbclus2)
</pre>

<hr /><div style="text-align: center;">[Package <em>survey</em> version 4.1-1 <a href="00Index.html">Index</a>]</div>
</body></html>
