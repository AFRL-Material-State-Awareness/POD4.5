import cProfile
from CPodDoc import *

def testcode():
    DEBUG = False
    pfTest = CPodDoc()
    pfTest.SetFlawData(flaws=[2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,4.28,4.28,4.28,4.28,5.17,5.17,5.17,5.17,5.17,
    5.17,5.17,5.17,5.615,5.615,5.615,5.615,5.615,5.615,5.615,5.615,6.06,6.06,6.06,6.06,6.06,6.06,6.06,6.06,6.505,
    6.505,6.505,6.505,6.505,6.505,6.505,6.505,6.505,6.505,6.95,6.95,6.95,6.95,6.95,7.395,7.395,7.395,7.84,7.84,
    7.84,8.285,8.285,8.285,8.73,8.73,8.73,8.73,8.73,8.73,9.62,9.62,9.62,9.62,10.065,10.51,10.51,10.51,10.688,10.955,
    10.955,11.934,11.934,11.934,11.934,11.934,11.934,11.934,12.379,12.468,12.468,12.468,12.557,12.557,13.18,
    13.625,13.625,13.714,13.803,13.803,13.803,13.803,14.07,14.96,15.1736,15.405,15.939,15.939,15.939,16.562,
    16.562,16.74,16.74,16.74,17.185,17.541,18.1462,18.1462,18.52,18.52,18.7514,19.2676,19.3744,19.855,20.389,
    21.19,22.08,22.08,22.6229,22.97,22.97,22.97,23.415,27.8116,27.8116,27.8116,27.8116,27.8116,27.8116,27.8116,
    27.8116,27.8116,27.8116,27.8116,27.8116,27.8116], 
    transform=TRANS_LOG,
    sequence_numbers=[28,29,54,57,65,74,91,92,93,94,30,45,47,56,31,32,37,44,46,58,95,100,9,18,36,43,48,73,99,
    126,10,12,33,35,38,40,53,122,1,2,3,4,7,8,27,51,66,75,42,67,83,96,121,5,6,39,11,49,97,52,84,144,19,34,50,59,
    118,120,13,41,55,64,98,89,117,119,68,17,90,60,69,70,72,77,80,82,101,62,63,71,87,123,85,15,76,61,86,88,124,
    125,14,143,26,24,78,79,81,127,128,20,22,25,16,136,108,109,21,142,135,102,129,130,116,137,23,141,110,103,
    115,138,114,104,105,106,107,111,112,113,131,132,133,134,139,140])

    pfTest.SetResponseData({'Ins 1':[0,0,1,0,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,0,0,1,1,1,1,1,1,0,0,0,1,1,1,1,1,0,
    0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}) 

    pfTest.analysis = PF_ANALYSIS
    #pfTest.SetFlawMaxSize(30.0)
    pfTest.OnAnalysis()
    
    newtable = pfTest.GetNewPFTable()
    print("gamma " + str(newtable['gamma'][0]) + " b " + str(newtable['b'][0]) )            
    print("new a90/95 " + str(newtable['new a90/95']))

cProfile.run('testcode()')